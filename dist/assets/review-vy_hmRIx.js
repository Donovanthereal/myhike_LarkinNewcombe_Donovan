import{d as u,a as d,e as m,i as h,b as g,c as k,s as v}from"./app-DL_CYei6.js";import"./site-footer-DB_3lTDs.js";var s=localStorage.getItem("hikeDocID");f(s);async function f(e){try{const t=u(d,"hikes",e),n=await m(t);if(n.exists()){const o=n.data().name;document.getElementById("hikeName").textContent=o}else console.log("No such hike found!")}catch(t){console.error("Error getting hike document:",t)}}document.addEventListener("DOMContentLoaded",()=>{w()});let r=0;function w(){const e=document.querySelectorAll(".star"),t=document.getElementById("submitBtn");if(!e.length){console.warn("No stars found on page.");return}e.forEach((n,o)=>{n.addEventListener("click",()=>{e.forEach((c,i)=>{c.textContent=i<=o?"star":"star_outline"}),r=o+1,console.log("Current rating:",r)})}),t?t.addEventListener("click",y):console.warn("Submit button not found.")}async function y(){console.log("Inside write review");const e=document.getElementById("title").value,t=document.getElementById("level").value,n=document.getElementById("season").value,o=document.getElementById("description").value,c=document.querySelector('input[name="flooded"]:checked')?.value,i=document.querySelector('input[name="scrambled"]:checked')?.value;if(console.log("inside write review, rating =",r),console.log("hikeDocID =",s),console.log("Collected review data:"),console.log(e,t,n,o,c,i),!e||!o){alert("Please complete all required fields.");return}const a=h.currentUser;if(a)try{const l=a.uid;await g(k(d,"reviews"),{hikeDocID:s,userID:l,title:e,level:t,season:n,description:o,flooded:c,scrambled:i,rating:r,timestamp:v()}),console.log("Review successfully written!"),window.location.href=`eachHike.html?docID=${s}`}catch(l){console.error("Error adding review:",l)}else console.log("No user is signed in")}
